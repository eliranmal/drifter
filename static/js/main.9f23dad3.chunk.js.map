{"version":3,"sources":["components/input/Input.js","pages/layout/Layout.js","components/label/Label.js","hoc/neumorphism/Neumorphism.js","components/select/Select.js","components/number-input/NumberInput.js","pages/settings/Settings.js","lib/audio.js","hooks/useMediaQueries.js","components/heading/Heading.js","lib/util.js","hooks/useToneRef.js","hooks/useSampler.js","hooks/useFixedSampler.js","hooks/useDriftingSampler.js","components/sampler/Sampler.js","hooks/useKeyboard.js","components/transport-button/TransportButton.js","components/transport/Transport.js","components/crossfader/Crossfader.js","components/control/Control.js","pages/main-view/MainView.js","components/error-boundary/AppErrorBoundary.js","App.js","reportWebVitals.js","index.js"],"names":["Input","type","className","props","spaceOut","term","charAt","String","fromCharCode","repeat","substring","Layout","children","Main","main","sideBar","SideBar","mainProps","sideBarProps","displayName","Label","length","withNeumorphism","WrappedComponent","tintColor","shadeColor","backgroundColor","style","options","map","key","value","label","optionClassName","Settings","bpm","setBpm","resetInterval","setResetInterval","htmlFor","id","min","max","onChange","currentTarget","defaultValue","unit","clearable","useMediaQueries","listenerByQueryMap","useEffect","listenerByQueryMappings","Object","entries","mediaQueries","queryString","queryListener","window","matchMedia","e","matches","queryMatchIndex","findIndex","forEach","query","listener","addEventListener","removeEventListener","Heading","text","Ã¸","create","blockThread","intensity","iterations","multiplier","primes","i","candidate","Math","random","isPrime","c","sqrt","push","calculatePrimes","matrixHead","arr","bind","matrixRotate","matrix","size","Array","keys","colIndex","row","rowIndex","useToneRef","args","useRef","Tone","toDestination","current","sampleMap","rolandTr808","resolveSampleMapDirName","samplerSampleMap","sampleMapEntry","find","is","findSampleMapEntry","kebabCase","useSampler","samplerOptions","analyserRef","useState","loaded","setLoaded","samplerKitDirName","samperRef","baseUrl","onload","chain","noteByChannelIndex","triggerMatrixAsNoteSequence","sixteenthValues","channelIndex","filter","Boolean","asTransportTime","sixteenthIndex","floor","join","loadTriggers","sampler","sixteenthNotes","triggerAttack","executeTriggers","stopPredicate","index","sliceTo","clearTimeout","sixteenthInMilliseconds","noteSequence","slice","tick","notes","setTimeout","useFixedSampler","triggerMatrix","samplerArgs","isSamplerLoaded","unsync","sync","audio","useDriftingSampler","isStoppedCallback","displayedSixteenths","driftingSampler","isDriftingSamplerLoaded","Sampler","balance","isRunning","onTriggerMatrixChange","useCallback","driftingSampler1","isDriftingSampler1Loaded","driftingSampler2","isDriftingSampler2Loaded","driftingSampler3","isDriftingSampler3Loaded","samplerVolumePercentage","driftingSamplerVolumePercentage","scale","n","volume","volumePercentage","abs","channel","tickValue","tickIndex","defaultChecked","col","checked","rowValue","colValue","useKeyboard","document","tooltipByType","play","stop","record","isActive","Transport","loop","loopLengthInSixteenths","onPlay","onStop","onRecord","isPlaying","setPlaying","isRecording","setRecording","playListener","then","start","stopListener","recordListener","toggleListener","setLoopPoints","init","mappings","mapping","keyCode","modifiers","every","modifier","preventDefault","onClick","Crossfader","debouncedOnChange","debounce","Control","onCrossfaderChange","MainView","setBalance","useLocalStorage","setTriggerMatrix","setLoopLengthInSixteenths","newTriggerMatrix","AppErrorBoundary","state","hasError","errorMessage","errorStackTrace","this","renderErrorView","message","open","React","Component","getDerivedStateFromError","error","stack","App","effect","delayShow","delayHide","textColor","multiline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9f23dad3.chunk.js","sourcesContent":["import './Input.css'\n\n\nconst Input = ({ type = 'text', className, ...props}) => (\n  <input\n    {...props}\n    type={type}\n    className={`drifter-input ${className ?? ''}`}\n    />\n)\n\n\nexport default Input\n","import Input from '../../components/input/Input'\n\nimport './Layout.css'\n\n\nconst Layout = ({\n  children,\n  main: Main,\n  sideBar: SideBar = () => null,\n  mainProps = {},\n  sideBarProps = {},\n}) => (\n  <div className=\"drifter-layout\">\n    <main className=\"drifter-layout-main\">\n      { Main ? <Main {...mainProps} /> : children }\n    </main>\n    <Input\n      className=\"drifter-layout-sidebar-pin\"\n      type=\"checkbox\"\n    />\n    <aside className=\"drifter-layout-sidebar\"\n      data-heading={spaceOut(SideBar.displayName)}>\n      <SideBar {...sideBarProps} />\n    </aside>\n  </div>\n)\n\n// todo - find a better way\nconst spaceOut = term => term ?\n  `${term.charAt(0)}${String.fromCharCode('0000a0').repeat(5)}${term.substring(1)}` :\n    ''\n\n\nexport default Layout\n","import './Label.css'\n\n\nconst Label = ({children, className, ...props}) => (\n  <label\n    {...props}\n    className={`drifter-label ${className ?? ''}`}>{\n      children && children.length ? children : null\n    }</label>\n)\n\n\nexport default Label\n","\nimport './Neumorphism.css'\n\n\nexport const withNeumorphism = (WrappedComponent, {\n  tintColor,\n  shadeColor,\n  backgroundColor\n} = {}) => ({className, ...props}) =>\n  <WrappedComponent\n    {...props}\n    className={`drifter-has-neumorphism ${className}`}\n    style={{\n      '--neumorphism-bg-color': backgroundColor,\n      '--neumorphism-shadow-color-tint': tintColor,\n      '--neumorphism-shadow-color-shade': shadeColor,\n    }} />\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism'\n\nimport './Select.css'\n\n\nconst Select = ({ options = [], className, ...props}) => (\n  <select\n    {...props}\n    className={`drifter-select ${className ?? ''}`}>\n      {options.map(({value, label, className: optionClassName}, key) => (\n        <option\n          className={`drifter-select-option ${optionClassName ?? ''}`}\n          key={key}\n          value={value}\n          >{label}</option>\n      ))}\n  </select>\n)\n\n\nexport default withNeumorphism(Select, {\n  backgroundColor: 'var(--background-color-complement)',\n  tintColor: 'var(--background-color-complement-tint)',\n  shadeColor: 'var(--background-color-complement-shade)',\n})\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism'\nimport Input from '../input/Input'\n\nimport './NumberInput.css'\n\n\nconst NumberInput = ({className, ...props}) => (\n  <Input\n    {...props}\n    className={`drifter-number-input ${className ?? ''}`}\n    type=\"number\" />\n)\n\n\nexport default withNeumorphism(NumberInput, {\n  backgroundColor: 'var(--background-color-complement)',\n  tintColor: 'var(--background-color-complement-tint)',\n  shadeColor: 'var(--background-color-complement-shade)',\n})\n","\nimport Label from '../../components/label/Label'\nimport Select from '../../components/select/Select'\nimport NumberInput from '../../components/number-input/NumberInput'\n\nimport './Settings.css'\n\n\nconst Settings = ({\n  bpm,\n  setBpm,\n  resetInterval,\n  setResetInterval,\n}) => (\n  <div className=\"drifter-settings\">\n    <div\n      className=\"drifter-setting-bpm\"\n      data-tip=\"set the speed in beats per minutes\"\n      data-place=\"left\"\n    >\n      <Label htmlFor=\"drifter-setting-input-bpm\">bpm:</Label>\n      <NumberInput\n        id=\"drifter-setting-input-bpm\"\n        min={1}\n        max={1000}\n        value={bpm}\n        onChange={({currentTarget: {value}}) => setBpm(+value)}\n      />\n    </div>\n    <div\n      className=\"drifter-setting-reset-interval\"\n      data-tip=\"synchronize the original source and the drifting source using this interval (0 means never)\"\n      data-place=\"left\"\n    >\n      <Label htmlFor=\"drifter-setting-input-reset-interval\">reset every:</Label>\n      <div>\n        <NumberInput\n          id=\"drifter-setting-input-reset-interval\"\n          min={0}\n          max={64}\n          value={resetInterval.value}\n          onChange={({currentTarget: {value}}) => setResetInterval({\n            ...resetInterval,\n            value: +value,\n          })}\n        />\n        <Select\n          options={[\n            { label: 'bars', value: 'bars' },\n            { label: 'beats', value: 'beats' },\n          ]}\n          defaultValue={resetInterval.unit}\n          onChange={({currentTarget: {value}}) => setResetInterval({\n            ...resetInterval,\n            unit: value,\n          })}\n        />\n      </div>\n    </div>\n  </div>\n)\n\nSettings.displayName = 'settings'\n\n\nexport default Settings\n","import * as Tone from 'tone'\nimport {matrixRotate, blockThread} from './util'\n\n\n// todo - how to get notes dynamically from the sampler instance?\n//        sampler.get() only seems to return the default settings\nconst noteByChannelIndex = [\n  'C4',\n  'C#4',\n  'D4',\n  'D#4',\n]\n\n\nconst triggerMatrixAsNoteSequence = matrix =>\n  matrixRotate(matrix)\n    .map(sixteenthValues => sixteenthValues\n      .map((value, channelIndex) => value && noteByChannelIndex[channelIndex])\n      .filter(Boolean))\n\n\nexport const asTransportTime = sixteenthIndex => [\n  Math.floor(sixteenthIndex / 16) % 4,\n  Math.floor(sixteenthIndex / 4) % 4,\n  sixteenthIndex % 4,\n].join(':')\n\n/**\n* this function is not pure!\n* it causes side effects by invoking the sampler instance imperatively\n*/\nexport const loadTriggers = (sampler, matrix) => {\n  triggerMatrixAsNoteSequence(matrix)\n    .map((sixteenthNotes, sixteenthIndex) => sixteenthNotes.length &&\n        sampler.triggerAttack(sixteenthNotes, asTransportTime(sixteenthIndex))\n    )\n}\n\nlet clearable\n\nexport const executeTriggers = (\n  sampler,\n  matrix = [],\n  bpm,\n  stopPredicate = index => index >= matrix.length - 1,\n  sliceTo,\n) => {\n  if (typeof clearable !== 'undefined') {\n    clearTimeout(clearable)\n  }\n  const sixteenthInMilliseconds = ((60 / bpm) / 4) * 1000\n  let noteSequence = triggerMatrixAsNoteSequence(matrix)\n  if (typeof sliceTo !== 'undefined') {\n    noteSequence = noteSequence.slice(0, sliceTo)\n  }\n\n  let index = 0\n  // console.time(index)\n  const tick = () => {\n    if (stopPredicate(index)) {\n      if (typeof clearable !== 'undefined') {\n        clearTimeout(clearable)\n      }\n      return\n    }\n\n    // todo - externalize this parameter as part of the 'entropy' knob\n    //        (in addition to the number of concurrent samplers)\n    blockThread(.2)\n\n    const notes = noteSequence[index % noteSequence.length]\n    // console.timeEnd(index)\n    index += 1\n    // console.time(index)\n    sampler.triggerAttack(notes, Tone.immediate())\n    clearable = setTimeout(tick, sixteenthInMilliseconds)\n  }\n\n  tick()\n}\n","import {useEffect} from 'react'\n\n\nconst useMediaQueries = listenerByQueryMap => {\n\n  useEffect(() => {\n    const listenerByQueryMappings = Object.entries(listenerByQueryMap)\n\n    const mediaQueries = listenerByQueryMappings.map(([queryString, queryListener]) => ([\n        window.matchMedia(queryString),\n        e => e.matches && queryListener(),\n      ]))\n\n    const queryMatchIndex = mediaQueries.findIndex(([query]) => query.matches)\n    if (queryMatchIndex !== -1) {\n      listenerByQueryMappings[queryMatchIndex][1]()\n    }\n\n    mediaQueries\n      .forEach(([query, listener]) => query.addEventListener('change', listener))\n\n    return () => mediaQueries\n      .forEach(([query, listener]) => query.removeEventListener('change', listener))\n  }, [listenerByQueryMap])\n}\n\n\nexport default useMediaQueries\n","\nimport './Heading.css'\n\n\nconst Heading = ({text = ''}) => (\n  <h1 className=\"drifter-heading\">{text.charAt(0)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{text.substring(1)}</h1>\n)\n\n\nexport default Heading\n","\nconst Ã¸ = Object.create(null)\n\n\nconst calculatePrimes = (iterations, multiplier) => {\n  var primes = [];\n  for (var i = 0; i < iterations; i++) {\n    var candidate = i * (multiplier * Math.random());\n    var isPrime = true;\n    for (var c = 2; c <= Math.sqrt(candidate); ++c) {\n      if (candidate % c === 0) {\n          // not prime\n          isPrime = false;\n          break;\n       }\n    }\n    if (isPrime) {\n      primes.push(candidate);\n    }\n  }\n  return primes;\n}\n\n\n/**\n* performs a heavy calculation, effectively blocking the thread\n*\n* @param {number} intensity a number from 0 to 1 indicating the computation intensity\n*/\nexport const blockThread = intensity => calculatePrimes(intensity * 50, intensity * 1000000000)\n\nexport const range = size => [...(new Array(size)).keys()]\n\nexport const head = (defaultValue, arr = []) => arr[0] ?? defaultValue\n\nexport const matrixHead = head.bind(Ã¸, [])\n\nexport const matrixRotate = matrix => range(matrixHead(matrix).length).map(\n  colIndex => matrix.map(\n    (row, rowIndex) => row[colIndex]\n  )\n)\n\nexport const matrixInsertValue = (matrix, row, col, value) => matrix.map(\n  (rowValue, rowIndex) => rowIndex === row ? rowValue.map(\n    (colValue, colIndex) => colIndex === col ? value : colValue\n  ) : rowValue\n)\n\nexport const percentageScale = (min, max) => n => (\n  ((max - min) / 100) * n\n)\n","import {useRef} from 'react'\nimport * as Tone from 'tone'\n\n\nconst useToneRef = (type = '', ...args) => useRef(\n  new Tone[type](...args).toDestination()\n).current\n\n\nexport default useToneRef\n","import {useState} from 'react'\nimport kebabCase from 'lodash.kebabcase'\n\nimport useToneRef from './useToneRef'\n\n\nconst sampleMap = {\n  rolandTr808: {\n    'C4': 'TR-808Kick01.wav',\n    'C#4': 'TR-808Snare01.wav',\n    'D4': 'TR-808Clap01.wav',\n    'D#4': 'TR-808Hat_C01.wav',\n  },\n}\n\nconst findSampleMapEntry = samplerSampleMap => Object.entries(sampleMap)\n  .find(([key, map]) => Object.is(samplerSampleMap, map))\n\nconst resolveSampleMapDirName = samplerSampleMap => {\n  const sampleMapEntry = findSampleMapEntry(samplerSampleMap)\n  return sampleMapEntry && sampleMapEntry[0] && kebabCase(sampleMapEntry[0])\n}\n\n// const analyserRef = useToneRef('Analyser')\nconst useSampler = (samplerSampleMap = {}, samplerOptions = {}, analyserRef) => {\n  const [loaded, setLoaded] = useState(false)\n\n  const samplerKitDirName = resolveSampleMapDirName(samplerSampleMap)\n\n  const samperRef = useToneRef('Sampler', samplerSampleMap, {\n    ...samplerOptions,\n    baseUrl: `audio/drum-machines/${samplerKitDirName}/`,\n    onload: () => {\n      setLoaded(true)\n      samplerOptions.onload && samplerOptions.onload()\n    },\n  })\n\n  return [analyserRef ? samperRef.chain(analyserRef) : samperRef, loaded, analyserRef]\n}\n\n\nexport {sampleMap}\n\nexport default useSampler\n","import {useEffect} from 'react'\nimport * as audio from '../lib/audio'\nimport useSampler from './useSampler'\n\n\nconst useFixedSampler = (triggerMatrix, ...samplerArgs) => {\n  const [sampler, isSamplerLoaded] = useSampler(...samplerArgs)\n\n  useEffect(() => sampler.unsync().sync(), [sampler, triggerMatrix])\n\n  useEffect(() => {\n    if (isSamplerLoaded) {\n      audio.loadTriggers(sampler, triggerMatrix)\n    }\n  }, [isSamplerLoaded, sampler, triggerMatrix])\n\n  return [sampler, isSamplerLoaded]\n}\n\n\nexport default useFixedSampler\n","import {useEffect} from 'react'\nimport * as audio from '../lib/audio'\nimport useSampler from './useSampler'\n\n\nconst useDriftingSampler = (triggerMatrix, bpm, isStoppedCallback, displayedSixteenths, ...samplerArgs) => {\n  const [driftingSampler, isDriftingSamplerLoaded] = useSampler(...samplerArgs)\n\n  useEffect(() => driftingSampler.unsync(), [driftingSampler, triggerMatrix])\n  useEffect(() => {\n    if (isDriftingSamplerLoaded) {\n      audio.executeTriggers(driftingSampler, triggerMatrix, bpm, isStoppedCallback, displayedSixteenths)\n    }\n  }, [isDriftingSamplerLoaded, driftingSampler, triggerMatrix, bpm, isStoppedCallback, displayedSixteenths])\n\n  return [driftingSampler, isDriftingSamplerLoaded]\n}\n\n\nexport default useDriftingSampler\n","import {useEffect, useCallback} from 'react'\n\nimport {matrixInsertValue, percentageScale} from '../../lib/util'\nimport {sampleMap} from '../../hooks/useSampler'\nimport useFixedSampler from '../../hooks/useFixedSampler'\nimport useDriftingSampler from '../../hooks/useDriftingSampler'\nimport Input from '../input/Input'\n\nimport './Sampler.css'\n\n\nconst Sampler = ({\n  className,\n  bpm,\n  balance,\n  // todo - replace 'isRunning' with 'cursor' to enable linking animation steps with audio events\n  isRunning,\n  displayedSixteenths = 20,\n  triggerMatrix = [],\n  onTriggerMatrixChange = () => {},\n}) => {\n\n  const isStoppedCallback = useCallback(() => !isRunning, [isRunning])\n\n  const [sampler, isSamplerLoaded] = useFixedSampler(triggerMatrix, sampleMap.rolandTr808)\n\n  const [driftingSampler1, isDriftingSampler1Loaded] = useDriftingSampler(triggerMatrix, bpm, isStoppedCallback, displayedSixteenths, sampleMap.rolandTr808)\n  const [driftingSampler2, isDriftingSampler2Loaded] = useDriftingSampler(triggerMatrix, bpm, isStoppedCallback, displayedSixteenths, sampleMap.rolandTr808)\n  const [driftingSampler3, isDriftingSampler3Loaded] = useDriftingSampler(triggerMatrix, bpm, isStoppedCallback, displayedSixteenths, sampleMap.rolandTr808)\n\n  useEffect(() => {\n    const samplerVolumePercentage = 100 - balance\n    const driftingSamplerVolumePercentage = 100 - samplerVolumePercentage\n    const scale = percentageScale(0, -24)\n    if (isSamplerLoaded) {\n      sampler.volume.value = scale(samplerVolumePercentage)\n    }\n    if (isDriftingSampler2Loaded && isDriftingSampler2Loaded && isDriftingSampler3Loaded) {\n      [driftingSampler1, driftingSampler2, driftingSampler3].forEach((driftingSampler, index, arr) => {\n        const volumePercentage = (driftingSamplerVolumePercentage / arr.length) * Math.abs(index - arr.length)\n        driftingSampler.volume.value = scale(volumePercentage)\n      })\n    }\n  }, [balance, sampler, driftingSampler1, driftingSampler2, driftingSampler3, isSamplerLoaded, isDriftingSampler1Loaded, isDriftingSampler2Loaded, isDriftingSampler3Loaded])\n\n\n  return (\n    <div\n      className={`drifter-sampler ${isRunning ? 'drifter-sampler-running' : ''} ${className}`}\n      style={{ '--sampler-ticks': displayedSixteenths }}\n    >\n      <div className=\"drifter-sampler-timeline\">\n        <div className=\"drifter-sampler-tape\"></div>\n        <div className=\"drifter-sampler-channels\">\n          {triggerMatrix.map((channel, channelIndex) => (\n            <div key={channelIndex} className=\"drifter-sampler-channel\">\n              {channel.map((tickValue, tickIndex) => (\n                <Input type=\"checkbox\" className=\"drifter-sampler-tick\"\n                  key={tickIndex}\n                  defaultChecked={tickValue}\n                  onChange={({currentTarget: {checked}}) => {\n                    onTriggerMatrixChange(matrixInsertValue(\n                      triggerMatrix, channelIndex, tickIndex, +Boolean(checked)\n                    ))\n                  }}\n                  />\n              ))}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Sampler\n","import {useEffect} from 'react'\n\n\n/**\n* a functional switch statement for command-style funneling of keyboard events.\n*\n* @param {Array<Array>} mappings - a list of tupples in the form:\n*   [\n*     [ {Number} keyCode, {Array<String>} modifiers, {Function} listener ]\n*   ]\n* modifiers is optional\n*\n* @returns {Function} an event listener that is routed and ready to be attached\n*/\nconst mapKeyboardEvents = mappings => e => {\n  const mapping = mappings.find(([keyCode, modifiers]) =>\n    keyCode === e.keyCode && (\n      !modifiers || modifiers.length === 0 ||\n      modifiers.every(modifier => e[modifier])\n    ))\n  if (mapping) {\n    e.preventDefault()\n    const listener = mapping[mapping.length - 1]\n    listener()\n  }\n}\n\nconst useKeyboard = (listener = () => {}) => {\n  useEffect(() => {\n    // keydown is best for capturing backspace and such\n    document.addEventListener('keydown', listener)\n    return () => {\n      document.removeEventListener('keydown', listener)\n    }\n  })\n}\n\n\nexport {mapKeyboardEvents}\n\nexport default useKeyboard\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism.js'\n\nimport './TransportButton.css'\n\n\nconst tooltipByType = {\n  play: 'play<br/>(space)',\n  stop: 'stop<br/>(space)',\n  record: 'record<br/>(shift+r)',\n}\n\n\nconst TransportButton = ({type, isActive, className, ...props}) => (\n  <button\n    {...props}\n    className={[\n      'drifter-transport-button',\n      type ? `drifter-transport-button-type-${type}` : '',\n      isActive ? 'drifter-transport-button-active' : '',\n      className,\n    ].filter(Boolean).join(' ')}\n    data-tip={tooltipByType[type]}\n  ></button>\n)\n\n\nexport default withNeumorphism(TransportButton)\n","import {useState, useEffect, useCallback} from 'react'\nimport * as Tone from 'tone'\n\nimport {asTransportTime} from '../../lib/audio'\nimport useKeyboard, {mapKeyboardEvents} from '../../hooks/useKeyboard'\nimport TransportButton from '../transport-button/TransportButton'\n\nimport './Transport.css'\n\n\nconst init = ({bpm, loop, loopLengthInSixteenths} = {}) => {\n  Tone.Transport.loop = loop\n  Tone.Transport.bpm.value = bpm\n  Tone.Transport.setLoopPoints(0, asTransportTime(loopLengthInSixteenths))\n}\n\nconst play = () => Tone.start()\n  .then(() => Tone.Transport.start())\n\nconst stop = () => Tone.loaded()\n  .then(() => Tone.Transport.stop())\n\n\nconst Transport = ({\n  bpm,\n  loop = true,\n  loopLengthInSixteenths,\n  onPlay = () => {},\n  onStop = () => {},\n  onRecord = () => {},\n}) => {\n  const [isPlaying, setPlaying] = useState(false)\n  const [isRecording, setRecording] = useState(false)\n\n  const playListener = useCallback(\n    () => !isPlaying && play()\n      .then(() => setPlaying(true))\n      .then(onPlay),\n    [isPlaying, onPlay])\n\n  const stopListener = useCallback(\n    () => isPlaying && stop()\n      .then(() => {\n        setPlaying(false)\n        setRecording(false)\n      })\n      .then(onStop),\n    [isPlaying, onStop])\n\n  const recordListener = useCallback(\n    () => {\n      setRecording(true)\n      onRecord()\n    }, [onRecord])\n\n  const toggleListener = useCallback(\n    () => isPlaying ? stopListener() : playListener(),\n    [isPlaying, playListener, stopListener])\n\n  useEffect(() => {\n    init({bpm, loop, loopLengthInSixteenths})\n  }, [bpm, loop, loopLengthInSixteenths])\n\n  useKeyboard(useCallback(e => mapKeyboardEvents([\n    // space\n    [32, () => toggleListener()],\n    // shift+r\n    [82, ['shiftKey'], () => {\n      playListener()\n      recordListener()\n    }],\n  ])(e), [playListener, recordListener, toggleListener]))\n\n  return (\n    <div className=\"drifter-transport\">\n      <TransportButton\n        type=\"play\"\n        onClick={playListener}\n        isActive={isPlaying}\n      />\n      <TransportButton\n        type=\"stop\"\n        onClick={stopListener}\n      />\n      <TransportButton\n        type=\"record\"\n        onClick={recordListener}\n        isActive={isRecording}\n      />\n    </div>\n  )\n}\n\n\nexport default Transport\n","import debounce from 'lodash.debounce'\nimport Input from '../input/Input'\n\nimport './Crossfader.css'\n\n\nconst Crossfader = ({className, onChange, ...props}) => {\n  const debouncedOnChange = debounce(onChange, 100)\n  return (\n    <Input\n      {...props}\n      className={`drifter-crossfader ${className}`}\n      type=\"range\"\n      onChange={({currentTarget: {value}}) => debouncedOnChange(value)}\n    />\n  )\n}\n\nexport default Crossfader\n","// import Meter from '../meter/Meter.js'\nimport Crossfader from '../crossfader/Crossfader.js'\n\nimport './Control.css'\n\n\n// todo - create a visualization based on the deviation of the tick actual delay\n//        from the intended delay (maybe a simple meter)\n\n\n// useEffect(() => {\n//   setInterval(() => {\n//     console.log(samplerAnalyser.getValue())\n//   }, 1000)\n// }, [samplerAnalyser, samplerAnalyser.getValue()])\n/*<div className=\"drifter-analyser-visualization\"></div>*/\n\n\nconst Control = ({className, onCrossfaderChange = () => {}, ...props}) => (\n  <div {...props} className={`drifter-control ${className}`}>\n    {/* todo - put audio visualization nodes here instead of the meters */}\n    {/* <Meter className=\"drifter-visualization-loose\" value={30} /> */}\n    <Crossfader\n      max={100}\n      defaultValue={50}\n      onChange={value => onCrossfaderChange(value)}\n    />\n    {/* <Meter className=\"drifter-visualization-tight\" value={80} /> */}\n  </div>\n)\n\n\nexport default Control\n","import {useState} from 'react'\nimport useLocalStorage from 'use-local-storage'\n\nimport useMediaQueries from '../../hooks/useMediaQueries'\n\nimport Heading from '../../components/heading/Heading'\nimport Sampler from '../../components/sampler/Sampler'\nimport Transport from '../../components/transport/Transport'\nimport Control from '../../components/control/Control'\n\nimport './MainView.css'\n\n\nconst MainView = ({\n  bpm,\n  resetInterval,\n}) => {\n  const [balance, setBalance] = useState(50)\n  const [isPlaying, setPlaying] = useState(false)\n\n  const [triggerMatrix, setTriggerMatrix] = useLocalStorage('drifter-trigger-matrix', [\n    [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  ])\n\n  const [loopLengthInSixteenths, setLoopLengthInSixteenths] = useState(20)\n\n  useMediaQueries({\n    '(max-width: 600px)': setLoopLengthInSixteenths.bind(null, 4),\n    '(min-width: 600px) and (max-width: 800px)': setLoopLengthInSixteenths.bind(null, 8),\n    '(min-width: 800px) and (max-width: 1200px)': setLoopLengthInSixteenths.bind(null, 16),\n    '(min-width: 1200px)': setLoopLengthInSixteenths.bind(null, 32),\n  })\n\n\n  return (\n    <div className=\"drifter-main-view\">\n      <Heading text=\"drifter\" />\n      <Sampler\n        className=\"drifter-main-view-panel\"\n        bpm={bpm}\n        balance={balance}\n        isRunning={isPlaying}\n        triggerMatrix={triggerMatrix}\n        onTriggerMatrixChange={newTriggerMatrix => {\n          setTriggerMatrix(newTriggerMatrix)\n        }}\n        displayedSixteenths={loopLengthInSixteenths}\n      />\n      <Transport\n        className=\"drifter-main-view-panel-center\"\n        bpm={bpm}\n        loopLengthInSixteenths={loopLengthInSixteenths}\n        onPlay={() => setPlaying(true)}\n        onStop={() => setPlaying(false)}\n      />\n      <Control\n        className=\"drifter-main-view-panel-end\"\n        onCrossfaderChange={value => setBalance(value)}\n      />\n    </div>\n  )\n}\n\n\nexport default MainView\n","import React from 'react'\n\nimport Heading from '../heading/Heading'\n\nimport './AppErrorBoundary.css'\n\n\nclass AppErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      hasError: false,\n      errorMessage: null,\n      errorStackTrace: null,\n    }\n  }\n\n  static getDerivedStateFromError = (error) => {\n    return {\n      hasError: true,\n      errorMessage: error.message,\n      errorStackTrace: error.stack,\n    }\n  }\n\n  // componentDidCatch(error, errorInfo) {\n  //   logErrorToMyService(error, errorInfo);\n  // }\n\n  render() {\n    if (this.state.hasError) {\n      return this.renderErrorView()\n    }\n    return this.props.children;\n  }\n\n  renderErrorView() {\n    return (\n      <div className=\"drifter-app-error-view\">\n        <Heading text={this.props.message ?? 'error'} />\n        <div className=\"drifter-app-error-view-details-box\">\n          <label>message</label>\n          <pre\n            className=\"drifter-app-error-view-pre\"\n          >{this.state.errorMessage}</pre>\n          <details\n            className=\"drifter-app-error-view-details\"\n            open\n          >\n            <summary>stack trace</summary>\n            <pre\n              className=\"drifter-app-error-view-pre drifter-app-error-view-stacktrace\"\n            >{this.state.errorStackTrace}</pre>\n          </details>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nexport default AppErrorBoundary\n","import useLocalStorage from 'use-local-storage'\nimport ReactTooltip from 'react-tooltip'\n\nimport Layout from './pages/layout/Layout'\nimport Settings from './pages/settings/Settings'\nimport MainView from './pages/main-view/MainView'\nimport AppErrorBoundary from './components/error-boundary/AppErrorBoundary'\n\nimport './App.css';\nimport './styles/react-tooltip.css'\n\n\nconst App = () => {\n  const [bpm, setBpm] = useLocalStorage('drifter-setting-bpm', 99)\n  const [resetInterval, setResetInterval] = useLocalStorage('drifter-setting-reset-interval-beats', {\n    value: 4,\n    unit: 'bars',\n  })\n\n  return (\n    <>\n      <ReactTooltip\n        className=\"drifter-react-tooltip\"\n        effect=\"solid\"\n        delayShow={300}\n        delayHide={300}\n        textColor=\"var(--background-color)\"\n        backgroundColor=\"var(--accent-color-complement)\"\n        multiline\n      />\n      <AppErrorBoundary>\n        <Layout\n          main={MainView}\n          mainProps={{\n            bpm,\n            resetInterval,\n          }}\n          sideBar={Settings}\n          sideBarProps={{\n            bpm,\n            setBpm,\n            resetInterval,\n            setResetInterval,\n          }}\n        />\n        </AppErrorBoundary>\n    </>\n  )\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}