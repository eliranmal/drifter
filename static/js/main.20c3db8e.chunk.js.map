{"version":3,"sources":["pages/layout/Layout.js","lib/util.js","lib/audio.js","hooks/useMediaQueries.js","hooks/useToneRef.js","hooks/useSampler.js","components/input/Input.js","components/sequencer/Sequencer.js","hooks/useKeyboard.js","hoc/neumorphism/Neumorphism.js","components/transport-button/TransportButton.js","components/transport/Transport.js","components/meter/Meter.js","components/crossfader/Crossfader.js","components/visualizations/Visualizations.js","pages/main-view/MainView.js","components/label/Label.js","components/select/Select.js","components/number-input/NumberInput.js","pages/settings/Settings.js","App.js","reportWebVitals.js","index.js"],"names":["spaceOut","term","charAt","String","fromCharCode","repeat","substring","Layout","children","Main","main","sideBar","SideBar","mainProps","sideBarProps","className","name","toLowerCase","rotateMatrix","matrix","size","length","Array","keys","map","colIndex","row","rowIndex","noteByChannelIndex","asTransportTime","sixteenthIndex","Math","floor","join","useMediaQueries","mediaQueryMap","dependencies","useEffect","mediaQueryMappings","Object","entries","mediaQueries","queryString","queryListener","window","matchMedia","e","matches","queryMatchIndex","findIndex","forEach","query","listener","addEventListener","removeEventListener","useToneRef","type","options","useRef","Tone","toDestination","current","sampleMap","urls","baseUrl","useSampler","samplerOptions","useState","loaded","setLoaded","error","setError","onload","onerror","err","sync","Input","props","Sequencer","isRunning","sampler","displayedTickCount","triggerMatrix","style","channel","channelIndex","tickValue","tickIndex","defaultChecked","useKeyboard","document","withNeumorphism","WrappedComponent","tintColor","shadeColor","backgroundColor","tooltipByType","play","stop","record","isActive","filter","Boolean","Transport","bpm","loop","loopLengthInSixteenths","onPlay","onStop","onRecord","isPlaying","setPlaying","isRecording","setRecording","playListener","useCallback","then","start","stopListener","recordListener","toggleListener","value","setLoopPoints","init","mappings","mapping","find","keyCode","modifiers","every","modifier","preventDefault","onClick","Meter","min","max","low","high","optimum","Crossfader","Visualizations","MainView","resetInterval","useLocalStorage","setLoopLengthInSixteenths","bind","sixteenthValues","sixteenthNotes","triggerAttack","audio","Label","key","label","optionClassName","Settings","setBpm","setResetInterval","htmlFor","id","onChange","target","defaultValue","unit","App","effect","delayShow","delayHide","textColor","multiline","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.20c3db8e.chunk.js","sourcesContent":["import './Layout.css'\n\n\nconst Layout = ({\n  children,\n  main: Main,\n  sideBar: SideBar = () => null,\n  mainProps = {},\n  sideBarProps = {},\n}) => (\n  <div className=\"drifter-layout\">\n    <main className=\"drifter-layout-main\">\n      { Main ? <Main {...mainProps} /> : children }\n    </main>\n    <aside className=\"drifter-layout-sidebar\"\n      data-heading={spaceOut(SideBar.name.toLowerCase())}>\n      <SideBar {...sideBarProps} />\n    </aside>\n  </div>\n)\n\n// todo - find a better way\nconst spaceOut = term => `${term.charAt(0)}${String.fromCharCode('0000a0').repeat(5)}${term.substring(1)}`\n\n\nexport default Layout\n","\nexport const range = size => [...(new Array(size)).keys()]\n\nexport const rotateMatrix = matrix => range(matrix[0] && matrix[0].length)\n    .map(colIndex => matrix\n        .map((row, rowIndex) => row[colIndex]))\n","import {rotateMatrix} from './util'\n\n\n// todo - how to get notes dynamically from the sampler instance?\n//        sampler.get() only seems to return the default settings\nconst noteByChannelIndex = [\n  'C4',\n  'C#4',\n  'D4',\n  'D#4',\n]\n\n\nexport const asTransportTime = sixteenthIndex => [\n  Math.floor(sixteenthIndex / 16) % 4,\n  Math.floor(sixteenthIndex / 4) % 4,\n  sixteenthIndex % 4,\n].join(':')\n\n\n/**\n* this function is not pure!\n* it causes side effects by invoking the sampler instance imperatively\n*/\nexport const loadTriggers = (sampler, matrix) => {\n  rotateMatrix(matrix)\n    .map(sixteenthValues => sixteenthValues\n      .map((value, channelIndex) => value && noteByChannelIndex[channelIndex])\n      .filter(Boolean))\n    .map((sixteenthNotes, sixteenthIndex) => sixteenthNotes.length &&\n        sampler.triggerAttack(sixteenthNotes, asTransportTime(sixteenthIndex))\n    )\n}\n","import {useEffect} from 'react'\n\n\nconst useMediaQueries = (mediaQueryMap, dependencies) => {\n\n  useEffect(() => {\n    const mediaQueryMappings = Object.entries(mediaQueryMap)\n\n    const mediaQueries = mediaQueryMappings.map(([queryString, queryListener]) => ([\n        window.matchMedia(queryString),\n        e => e.matches && queryListener(),\n      ]))\n\n    const queryMatchIndex = mediaQueries.findIndex(([query]) => query.matches)\n    if (queryMatchIndex !== -1) {\n      mediaQueryMappings[queryMatchIndex][1]()\n    }\n\n    mediaQueries\n      .forEach(([query, listener]) => query.addEventListener('change', listener))\n\n    return () => mediaQueries\n      .forEach(([query, listener]) => query.removeEventListener('change', listener))\n  // eslint-disable-next-line \n  }, [mediaQueryMap, ...dependencies])\n}\n\n\nexport default useMediaQueries\n","import {useRef} from 'react'\nimport * as Tone from 'tone'\n\n\nconst useToneRef = (type = '', options) => useRef(\n  new Tone[type](options).toDestination()\n).current\n\n\nexport default useToneRef\n","import {useState} from 'react'\nimport useToneRef from './useToneRef'\n\n\nconst sampleMap = {\n  rolandTr808: {\n    urls: {\n      'C4': 'TR-808Kick01.wav',\n      'C#4': 'TR-808Snare01.wav',\n      'D4': 'TR-808Clap01.wav',\n      'D#4': 'TR-808Hat_C01.wav',\n    },\n    baseUrl: '/audio/drum-machines/roland-tr-808/',\n  }\n}\n\nconst useSampler = (sampleMap = {}, samplerOptions = {}) => {\n  const [loaded, setLoaded] = useState(false)\n  const [error, setError] = useState(null)\n\n  return [useToneRef('Sampler', {\n    ...samplerOptions,\n    ...sampleMap,\n    onload: () => setLoaded(true),\n    onerror: err => setError(err),\n  }).sync(), loaded, error]\n}\n\n\nexport {sampleMap}\n\nexport default useSampler\n","import './Input.css'\n\n\nconst Input = ({ type = 'text', className, ...props}) => (\n  <input\n    {...props}\n    type={type}\n    className={`drifter-input ${className ?? ''}`}\n    />\n)\n\n\nexport default Input\n","import Input from '../input/Input'\n\nimport './Sequencer.css'\n\n\n// todo - expose 'cursor' property to enable linking animation steps with audio events\nconst Sequencer = ({\n  className,\n  sampler,\n  isRunning,\n  displayedTickCount = 20,\n  triggerMatrix = [],\n}) => {\n\n    return (\n      <div\n        className={`drifter-sequencer ${isRunning ? 'drifter-sequencer-running' : ''} ${className}`}\n        style={{ '--sequencer-ticks': displayedTickCount }}>\n        <div className=\"drifter-sequencer-timeline\">\n          <div className=\"drifter-sequencer-tape\"></div>\n          <div className=\"drifter-sequencer-channels\">\n            {triggerMatrix.map((channel, channelIndex) => (\n              <div key={channelIndex} className=\"drifter-sequencer-channel\">\n                {channel.map((tickValue, tickIndex) => (\n                  <Input type=\"checkbox\" className=\"drifter-sequencer-tick\"\n                    key={tickIndex} defaultChecked={tickValue} />\n                ))}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    )\n}\n\nexport default Sequencer\n","import {useEffect} from 'react'\n\n\n/**\n* a functional switch statement for command-style funneling of keyboard events.\n*\n* @param {Array<Array>} mappings - a list of tupples in the form:\n*   [\n*     [ {Number} keyCode, {Array<String>} modifiers, {Function} listener ]\n*   ]\n* modifiers is optional\n*\n* @returns {Function} an event listener that is routed and ready to be attached\n*/\nconst mapKeyboardEvents = mappings => e => {\n  const mapping = mappings.find(([keyCode, modifiers]) =>\n    keyCode === e.keyCode && (\n      !modifiers || modifiers.length === 0 ||\n      modifiers.every(modifier => e[modifier])\n    ))\n  if (mapping) {\n    e.preventDefault()\n    const listener = mapping[mapping.length - 1]\n    listener()\n  }\n}\n\nconst useKeyboard = (listener = () => {}) => {\n  useEffect(() => {\n    // keydown is best for capturing backspace and such\n    document.addEventListener('keydown', listener)\n    return () => {\n      document.removeEventListener('keydown', listener)\n    }\n  })\n}\n\n\nexport {mapKeyboardEvents}\n\nexport default useKeyboard\n","\nimport './Neumorphism.css'\n\n\nexport const withNeumorphism = (WrappedComponent, {\n  tintColor,\n  shadeColor,\n  backgroundColor\n} = {}) => ({className, ...props}) =>\n  <WrappedComponent\n    {...props}\n    className={`drifter-has-neumorphism ${className}`}\n    style={{\n      '--neumorphism-bg-color': backgroundColor,\n      '--neumorphism-shadow-color-tint': tintColor,\n      '--neumorphism-shadow-color-shade': shadeColor,\n    }} />\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism.js'\n\nimport './TransportButton.css'\n\n\nconst tooltipByType = {\n  play: 'play<br/>(space)',\n  stop: 'stop<br/>(space)',\n  record: 'record<br/>(shift+r)',\n}\n\n\nconst TransportButton = ({type, isActive, className, ...props}) => (\n  <button\n    {...props}\n    className={[\n      'drifter-transport-button',\n      type ? `drifter-transport-button-type-${type}` : '',\n      isActive ? 'drifter-transport-button-active' : '',\n      className,\n    ].filter(Boolean).join(' ')}\n    data-tip={tooltipByType[type]}\n  ></button>\n)\n\n\nexport default withNeumorphism(TransportButton)\n","import {useState, useEffect, useCallback} from 'react'\nimport * as Tone from 'tone'\n\nimport {asTransportTime} from '../../lib/audio'\nimport useKeyboard, {mapKeyboardEvents} from '../../hooks/useKeyboard'\nimport TransportButton from '../transport-button/TransportButton'\n\nimport './Transport.css'\n\n\nconst init = ({bpm, loop, loopLengthInSixteenths} = {}) => {\n  Tone.Transport.loop = loop\n  Tone.Transport.bpm.value = bpm\n  Tone.Transport.setLoopPoints(0, asTransportTime(loopLengthInSixteenths))\n}\n\nconst play = () => Tone.start()\n  .then(() => Tone.Transport.start())\n\nconst stop = () => Tone.loaded()\n  .then(() => Tone.Transport.stop())\n\n\nconst Transport = ({\n  bpm,\n  loop = true,\n  loopLengthInSixteenths,\n  onPlay = () => {},\n  onStop = () => {},\n  onRecord = () => {},\n}) => {\n  const [isPlaying, setPlaying] = useState(false)\n  const [isRecording, setRecording] = useState(false)\n\n  const playListener = useCallback(\n    () => !isPlaying && play()\n      .then(() => setPlaying(true))\n      .then(onPlay),\n    [isPlaying, onPlay])\n\n  const stopListener = useCallback(\n    () => isPlaying && stop()\n      .then(() => {\n        setPlaying(false)\n        setRecording(false)\n      })\n      .then(onStop),\n    [isPlaying, onStop])\n\n  const recordListener = useCallback(\n    () => {\n      setRecording(true)\n      onRecord()\n    }, [onRecord])\n\n  const toggleListener = useCallback(\n    () => isPlaying ? stopListener() : playListener(),\n    [isPlaying, playListener, stopListener])\n\n  useEffect(() => {\n    init({bpm, loop, loopLengthInSixteenths})\n  }, [bpm, loop, loopLengthInSixteenths])\n\n  useKeyboard(useCallback(e => mapKeyboardEvents([\n    // space\n    [32, () => toggleListener()],\n    // shift+r\n    [82, ['shiftKey'], () => {\n      playListener()\n      recordListener()\n    }],\n  ])(e), [playListener, recordListener, toggleListener]))\n\n  return (\n    <div className=\"drifter-transport\">\n      <TransportButton\n        type=\"play\"\n        onClick={playListener}\n        isActive={isPlaying}\n      />\n      <TransportButton\n        type=\"stop\"\n        onClick={stopListener}\n      />\n      <TransportButton\n        type=\"record\"\n        onClick={recordListener}\n        isActive={isRecording}\n      />\n    </div>\n  )\n}\n\n\nexport default Transport\n","import './Meter.css'\n\n\nconst Meter = ({\n  min = 0, max = 100,\n  low = 50, high = 80,\n  optimum = 0,\n  value = 30,\n  className,\n  ...props}) => (\n  <meter\n    min={min} max={max}\n    low={low} high={high}\n    optimum={optimum}\n    value={value}\n    {...props}\n    className={`drifter-meter ${className ?? ''}`}\n    ></meter>\n)\n\n\nexport default Meter\n","import Input from '../input/Input';\n\nimport './Crossfader.css'\n\n\nconst Crossfader = ({className, ...props}) => (\n  <Input\n    {...props}\n    className={`drifter-crossfader ${className}`}\n    type=\"range\" />\n)\n\n\nexport default Crossfader\n","import Meter from '../meter/Meter.js'\nimport Crossfader from '../crossfader/Crossfader.js'\n\nimport './Visualizations.css'\n\n\nconst Visualizations = ({className, ...props}) => (\n  <div {...props} className={`drifter-visualizations ${className}`}>\n    {/* todo - put audio visualization nodes here instead of the meters */}\n    <Meter className=\"drifter-visualization-loose\" value={30} />\n    <Crossfader />\n    <Meter className=\"drifter-visualization-tight\" value={80} />\n  </div>\n)\n\n\nexport default Visualizations\n","import {useState, useEffect} from 'react'\nimport useLocalStorage from 'use-local-storage'\n\nimport * as audio from '../../lib/audio'\nimport useMediaQueries from '../../hooks/useMediaQueries'\nimport useSampler, {sampleMap} from '../../hooks/useSampler'\nimport Sequencer from '../../components/sequencer/Sequencer'\nimport Transport from '../../components/transport/Transport'\nimport Visualizations from '../../components/visualizations/Visualizations'\n\nimport './MainView.css'\n\n\nconst MainView = ({\n  bpm,\n  resetInterval,\n}) => {\n  const [isPlaying, setPlaying] = useState(false)\n\n  const [triggerMatrix/*, setTriggerMatrix*/] = useLocalStorage('drifter-trigger-matrix', [\n    [1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],\n    // [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n  ])\n\n  const [loopLengthInSixteenths, setLoopLengthInSixteenths] = useState(20)\n\n  useMediaQueries({\n    '(max-width: 600px)': setLoopLengthInSixteenths.bind(null, 4),\n    '(min-width: 600px) and (max-width: 800px)': setLoopLengthInSixteenths.bind(null, 8),\n    '(min-width: 800px) and (max-width: 1200px)': setLoopLengthInSixteenths.bind(null, 16),\n    '(min-width: 1200px)': setLoopLengthInSixteenths.bind(null, 32),\n  }, [setLoopLengthInSixteenths])\n\n  const [sampler/*, loaded, error*/] = useSampler(sampleMap.rolandTr808)\n\n  useEffect(() => {\n    audio.loadTriggers(sampler, triggerMatrix)\n  }, [sampler, triggerMatrix])\n\n\n  return (\n    <div className=\"drifter-main-view\">\n      <h1 className=\"drifter-main-view-title\">d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rifter</h1>\n      <Sequencer\n        className=\"drifter-main-view-panel\"\n        isRunning={isPlaying}\n        triggerMatrix={triggerMatrix}\n        displayedTickCount={loopLengthInSixteenths}\n      />\n      <Transport\n        className=\"drifter-main-view-panel-center\"\n        bpm={bpm}\n        loopLengthInSixteenths={loopLengthInSixteenths}\n        onPlay={() => setPlaying(true)}\n        onStop={() => setPlaying(false)}\n      />\n      <Visualizations className=\"drifter-main-view-panel-end\" />\n    </div>\n  )\n}\n\n\nexport default MainView\n","import './Label.css'\n\n\nconst Label = ({children, className, ...props}) => (\n  <label\n    {...props}\n    className={`drifter-label ${className ?? ''}`}>{\n      children && children.length ? children : null\n    }</label>\n)\n\n\nexport default Label\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism'\n\nimport './Select.css'\n\n\nconst Select = ({ options = [], className, ...props}) => (\n  <select\n    {...props}\n    className={`drifter-select ${className ?? ''}`}>\n      {options.map(({value, label, className: optionClassName}, key) => (\n        <option\n          className={`drifter-select-option ${optionClassName ?? ''}`}\n          key={key}\n          value={value}\n          >{label}</option>\n      ))}\n  </select>\n)\n\n\nexport default withNeumorphism(Select, {\n  backgroundColor: 'var(--background-color-complement)',\n  tintColor: 'var(--background-color-complement-tint)',\n  shadeColor: 'var(--background-color-complement-shade)',\n})\n","import {withNeumorphism} from '../../hoc/neumorphism/Neumorphism'\nimport Input from '../input/Input'\n\nimport './NumberInput.css'\n\n\nconst NumberInput = ({className, ...props}) => (\n  <Input\n    {...props}\n    className={`drifter-number-input ${className ?? ''}`}\n    type=\"number\" />\n)\n\n\nexport default withNeumorphism(NumberInput, {\n  backgroundColor: 'var(--background-color-complement)',\n  tintColor: 'var(--background-color-complement-tint)',\n  shadeColor: 'var(--background-color-complement-shade)',\n})\n","\nimport Label from '../../components/label/Label'\nimport Select from '../../components/select/Select'\nimport NumberInput from '../../components/number-input/NumberInput'\n\nimport './Settings.css'\n\n\nconst Settings = ({\n  bpm,\n  setBpm,\n  resetInterval,\n  setResetInterval,\n}) => (\n  <div className=\"drifter-settings\">\n    <div\n      className=\"drifter-setting-bpm\"\n      data-tip=\"set the speed in beats per minutes\"\n      data-place=\"left\"\n    >\n      <Label htmlFor=\"drifter-setting-input-bpm\">bpm:</Label>\n      <NumberInput\n        id=\"drifter-setting-input-bpm\"\n        min={1}\n        max={1000}\n        value={bpm}\n        onChange={({target: {value}}) => setBpm(+value)}\n      />\n    </div>\n    <div\n      className=\"drifter-setting-reset-interval\"\n      data-tip=\"synchronize the original source and the drifting source using this interval (0 means never)\"\n      data-place=\"left\"\n    >\n      <Label htmlFor=\"drifter-setting-input-reset-interval\">reset every:</Label>\n      <div>\n        <NumberInput\n          id=\"drifter-setting-input-reset-interval\"\n          min={0}\n          max={64}\n          value={resetInterval.value}\n          onChange={({target: {value}}) => setResetInterval({\n            ...resetInterval,\n            value: +value,\n          })}\n        />\n        <Select\n          options={[\n            { label: 'bars', value: 'bars' },\n            { label: 'beats', value: 'beats' },\n          ]}\n          defaultValue={resetInterval.unit}\n          onChange={({target: {value}}) => setResetInterval({\n            ...resetInterval,\n            unit: value,\n          })}\n        />\n      </div>\n    </div>\n  </div>\n)\n\n\nexport default Settings\n","import useLocalStorage from 'use-local-storage'\nimport ReactTooltip from 'react-tooltip'\n\nimport Layout from './pages/layout/Layout'\nimport MainView from './pages/main-view/MainView'\nimport Settings from './pages/settings/Settings'\n\nimport './App.css';\nimport './styles/react-tooltip.css'\n\n\nconst App = () => {\n  const [bpm, setBpm] = useLocalStorage('drifter-setting-bpm', 99)\n  const [resetInterval, setResetInterval] = useLocalStorage('drifter-setting-reset-interval-beats', {\n    value: 4,\n    unit: 'bars',\n  })\n\n  return (\n    <>\n      <ReactTooltip\n        className=\"drifter-react-tooltip\"\n        effect=\"solid\"\n        delayShow={300}\n        delayHide={300}\n        textColor=\"var(--background-color)\"\n        backgroundColor=\"var(--accent-color-complement)\"\n        multiline\n      />\n      <Layout\n        main={MainView}\n        mainProps={{\n          bpm,\n          resetInterval,\n        }}\n        sideBar={Settings}\n        sideBarProps={{\n          bpm,\n          setBpm,\n          resetInterval,\n          setResetInterval,\n        }}\n      />\n    </>\n  )\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}